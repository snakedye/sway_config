<eww>
  <definitions>
    <def name="bar0">
      <box class="bar" halign="fill">
        <left/>
        <workspaces0/>
        <tray/>
      </box>
    </def>
    <def name="bar1">
      <box class="bar" halign="fill">
        <left/>
        <workspaces1/>
        <tray/>
      </box>
    </def>
    <def name="left">
      <box class="left" orientation="h" space-evenly="false" spacing="15" halign="start">
        <link/><vsplit/>
        <button orientation="h" class="{{mpris-status}}" halign="fill" onclick="playerctl play-pause">
          <label text="{{if mpris-status == 'Paused' then '契' else ''}}  {{mpris}}" halign="center" limit-width="60"></label>
        </button>
      </box>
    </def>
    <def name="workspaces1">
      <box class="tags" spacing="10" space-evenly="false" halign="center">
        <button class="{{if tag1 =~ '(^1 | 1 | 1$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 1">I</button>
        <button class="{{if tag1 =~ '(^2 | 2 | 2$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 2">II</button>
        <button class="{{if tag1 =~ '(^3 | 3 | 3$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 3">III</button>
        <button class="{{if tag1 =~ '(^4 | 4 | 4$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 4">IV</button>
        <button class="{{if tag1 =~ '(^5 | 5 | 5$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 5">V</button>
        <button class="{{if tag1 =~ '(^6 | 6 | 5$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 6">VI</button>
        <button class="{{if tag1 =~ '(^7 | 7 | 6$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 7">VII</button>
        <button class="{{if tag1 =~ '(^8 | 8 | 8$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 8">VIII</button>
        <button class="{{if tag1 =~ '(^9 | 9 | 9$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 9">IX</button>
        <button class="{{if tag1 =~ '(^20 | 20 | 20$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 20">M</button>
        <button class="{{if tag1 =~ '(^21 | 21 | 21$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 21">N</button>
        <button class="{{if tag1 =~ '(^22 | 22 | 22$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 22">B</button>
      </box>
    </def>
    <def name="workspaces0">
      <box class="tags" spacing="10" space-evenly="false" halign="center">
        <button class="{{if tag0 =~ '(^1 | 1 | 1$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 1">I</button>
        <button class="{{if tag0 =~ '(^2 | 2 | 2$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 2">II</button>
        <button class="{{if tag0 =~ '(^3 | 3 | 3$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 3">III</button>
        <button class="{{if tag0 =~ '(^4 | 4 | 4$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 4">IV</button>
        <button class="{{if tag0 =~ '(^5 | 5 | 5$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 5">V</button>
        <button class="{{if tag0 =~ '(^6 | 6 | 6$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 6">VI</button>
        <button class="{{if tag0 =~ '(^7 | 7 | 7$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 7">VII</button>
        <button class="{{if tag0 =~ '(^8 | 8 | 8$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 8">VIII</button>
        <button class="{{if tag0 =~ '(^9 | 9 | 9$)' then 'active'  else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 9">IX</button>
        <button class="{{if tag0 =~ '(^20 | 20 | 20$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 20">M</button>
        <button class="{{if tag0 =~ '(^21 | 21 | 21$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 21">N</button>
        <button class="{{if tag0 =~ '(^22 | 22 | 22$)' then 'active' else 'inactive'}}" onclick="~/.config/eww/scripts/workspaces 22">B</button>
      </box>
    </def>
    <def name="volume">
      <box style="font-size: 14px" class="volume" orientation="h" space-evenly="false" spacing="15" halign="end">
        <volume_icon/>
        <progress width="200" valign="center" value="{{volume}}"/>
      </box>
    </def>
    <def name="tray">
      <box class="tray" orientation="h" space-evenly="false" spacing="10" halign="end">
        <recorder/>
        <volume/>
        <info/><vsplit/>
        <button class="time" 
          style="font-size: 11px; font-weight: 600;"
          onclick="~/.local/bin/eww close hub || ~/.local/bin/eww open hub" halign="end">{{time}}</button>
      </box>
    </def>
    <def name="info">
      <box class="tray-info" orientation="h" space-evenly="false" spacing="15" halign="fill">
        <button class="{{if pacman > 0 then 'pacman' else 'none'}}" halign="fill" 
          style="color: #978074;"
          onclick="foot paru &">
          {{pacman}} 
        </button>
        <button style="color: #9da98d;" halign="fill" onclick="nm-connection-editor &">
          {{if network!='' then '直 connected' else '  disconnected'}}
        </button>
      </box>
    </def>
    <def name="recorder">
      <button class="tray-info" orientation="h" space-evenly="false"
        onclick="kill -INT $(pgrep wf-recorder)"
        style="color: #cb7073;" spacing="15" halign="end" visible="{{recorder}}">
        recording
      </button>
    </def>
    <def name="vsplit">
      <box>
      <label text="|" style="color: #474747"></label>
      </box>
    </def>
    <def name="link">
      <box class="link" orientation="h" space-evenly="true" spacing="25" halign="fill">
        <button style="color: #dcbb8c" onclick="xdg-open https://github.com/"></button>
        <button style="color: #d59877" onclick="xdg-open https://www.reddit.com/"></button>
        <button style="color: #6F8798" onclick="firefox https://discord.com/channels/@me"></button>
        <button style="color: #cb7073" onclick="xdg-open https://www.youtube.com/">輸</button>
      </box>
    </def>
  </definitions>
  <variables>
    <var name="recorder">false</var>
    <script-var name="tag0">~/.local/bin/ristate -t -m 0</script-var>
    <script-var name="tag1">~/.local/bin/ristate -t -m 1</script-var>
    <script-var interval="600s" name="pacman">checkupdates | wc -l</script-var>
    <script-var name="mpris-status">playerctl status -F</script-var>
    <script-var name="mpris">playerctl metadata --format '{{title}}' -F</script-var>
    <script-var interval="60s" name="network">nmcli -p -g {connection} | grep -e 'connected to' | sed -e 's/ .* //' -e 's/.*://'</script-var>
  </variables>
</eww>
